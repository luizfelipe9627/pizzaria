const qS=a=>document.querySelector(a),qSA=a=>document.querySelectorAll(a);let modalQt=1,cart=[],modalKey=0;function closeModal(){qS(".pizzaWindowArea").style.opacity=0,setTimeout(()=>{qS(".pizzaWindowArea").style.display="none"},500)}function updateCart(){if(qS(".menu-openner span").innerHTML=cart.length,cart.length>0){qS("aside").classList.add("show"),qS(".cart").innerHTML="";let c=0,e=0,g=0;for(let b in cart){let f=pizzaJson.find(a=>a.id==cart[b].id);c+=f.price*cart[b].qt;let d;0==cart[b].size&&(d="P"),1==cart[b].size&&(d="M"),2==cart[b].size&&(d="G");let a=qS(".models .cart--item").cloneNode(!0);qS(".cart").append(a),a.querySelector("img").src=f.img,a.querySelector(".cart--item--qt").innerHTML=cart[b].qt;let h=`${f.name} (${d})`;a.querySelector(".cart--item-nome").innerHTML=h,a.querySelector(".cart--item-qtmais").addEventListener("click",()=>{cart[b].qt++,updateCart()}),a.querySelector(".cart--item-qtmenos").addEventListener("click",()=>{cart[b].qt>1?cart[b].qt--:cart.splice(b,1),updateCart()}),e=.1*c,g=c-e,qS(".subtotal span:last-child").innerHTML=`R$ ${c.toFixed(2)}`,qS(".desconto span:last-child").innerHTML=`R$ ${e.toFixed(2)}`,qS(".total span:last-child").innerHTML=`R$ ${g.toFixed(2)}`}}else qS("aside").classList.remove("show"),qS("aside").style.left="100vw"}pizzaJson.map((b,c)=>{let a=qS(".models .pizza-item").cloneNode(!0);qS(".pizza-area").append(a),a.setAttribute("data-key",c),a.querySelector(".pizza-item--img img").src=b.img,a.querySelector(".pizza-item--price").innerHTML=`R$ ${b.price.toFixed(2)}`,a.querySelector(".pizza-item--name").innerHTML=b.name,a.querySelector(".pizza-item--desc").innerHTML=b.description,a.querySelector("a").addEventListener("click",b=>{b.preventDefault();let a=b.target.closest(".pizza-item").getAttribute("data-key");modalQt=1,modalKey=a,qS(".pizzaWindowArea").style.opacity=0,qS(".pizzaWindowArea").style.display="flex",setTimeout(()=>{qS(".pizzaWindowArea").style.opacity=1},200),qS(".pizzaBig img").src=pizzaJson[a].img,qS(".pizzaInfo h1").innerHTML=pizzaJson[a].name,qS(".pizzaInfo--desc").innerHTML=pizzaJson[a].description,qS(".pizzaInfo--size.selected").classList.remove("selected"),qSA(".pizzaInfo--size").forEach((b,c)=>{b.querySelector("span").innerHTML=pizzaJson[a].sizes[c],2==c&&b.classList.add("selected")}),qS(".pizzaInfo--actualPrice").innerHTML=`R$ ${pizzaJson[a].price.toFixed(2)}`,qS(".pizzaInfo--qt").innerHTML=modalQt})}),qSA(".pizzaInfo--cancelButton, .pizzaInfo--cancelMobileButton").forEach(a=>{a.addEventListener("click",closeModal)}),qS(".pizzaInfo--qtmais").addEventListener("click",()=>{modalQt++,qS(".pizzaInfo--qt").innerHTML=modalQt}),qS(".pizzaInfo--qtmenos").addEventListener("click",()=>{modalQt>1&&(modalQt--,qS(".pizzaInfo--qt").innerHTML=modalQt)}),qSA(".pizzaInfo--size").forEach((a,b)=>{a.addEventListener("click",b=>{qS(".pizzaInfo--size.selected").classList.remove("selected"),a.classList.add("selected")})}),qS(".pizzaInfo--addButton").addEventListener("click",()=>{let a=qS(".pizzaInfo--size.selected").getAttribute("data-key"),c=pizzaJson[modalKey].id+"@"+a,b=cart.findIndex(a=>a.identifier==c);b> -1?cart[b].qt+=modalQt:cart.push({id:pizzaJson[modalKey].id,size:a,qt:modalQt}),updateCart(),closeModal()}),qS(".menu-openner").addEventListener("click",()=>{cart.length>0&&(qS("aside").style.left="0")}),qS(".menu-closer").addEventListener("click",()=>{qS("aside").style.left="100vw"})